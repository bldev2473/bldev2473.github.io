---
title: "[Git] 브랜치 병합 (Merge, Rebase)"
date: 2020-04-07 00:10:00 -0000
categories: Git
---

### 병합
* 분기된 브랜치가 없을 경우
	* 병합 커밋 생성 및 포인터 이동: no fast-forward
	* 포인터만 이동: fast-forward
* 분기된 브랜치가 있는 경우 병합의 결과를 별도의 새로운 커밋으로 생성하고 포인터 이동: three-way-merge
* no fast-forward: 브랜치 이력을 남기고 병합 커밋을 생성함
```
A
C1
```
```
A
C1
B
```
```
    B
A ↙ C2
C1
```
```
A ↙ C2 ↖ B
C1       C3
```
```
  ↙ C2 ↖
C1  ←  C3 (병합 커밋)
       A,B
```
* fast-forward: 브랜치B는 브랜치A로 부터 분기한 브랜치이고, 브랜치B를 브랜치 A에 병합 시 브랜치B가 가리키는 커밋이 분기전 브랜치A 커밋에 기반한 브랜치이면 병합 과정 없이 단지 브랜치A의 포인터를 최신 커밋으로 이동시킴
	* 병합 커밋을 생성하지 않음
```
A
C1
```
```
A
C1
B
```
```
A    B
C1 ← C2
```
```
     A,B
C1 ← C2
```
* three-way merge: 각 브랜치가 가리키는 커밋 두 개와 두 브랜치의 공통 조상 커밋 하나를 사용하여 단순하게 병합
	* 단순히 브랜치 포인터를 최신 커밋으로 옮기는 것이 아니라 병합의 결과를 별도의 새로운 커밋으로 생성함으로써 체크아웃 한 현재 브랜치(병합 기준 브랜치)가 새로 생성된 커밋을 가리키도록 이동시킴
```
          B
        ↙ C4
C1 ← C2 ← C3
          A
```
```
          B
        ↙ C4 ↖
C1 ← C2 ← C3 ← C5
               A
```
### 리베이스
* 브랜치의 변경된 사항을 패치(patch)로 만들고 다른 브랜치에 적용시키는 또다른 방법
* 한 브랜치에서 변경된 모든 사항을 다른 브랜치에 적용시킬 수 있음
* 변경사항이 적용된 새로운 커밋을 만들고 체크아웃 한 브랜치가 가리키게 한 후 병합 기준 브랜치로 돌아가 fast-forward 병합을 수행함
```
          B
        ↙ C4
C1 ← C2 ← C3
          A
```
```
               B
C1 ← C2 ← C3 ← C4'
          A
```
```
               B
C1 ← C2 ← C3 ← C4'
               A
```
* 리베이스는 한 브랜치의 변경사항을 순서대로 다른 브랜치에 적용하면서 합치는 것이고, 병합은 두 브랜치의 최종 결과만을 가지고 합침
